# Poetryへの貢献

まず最初に、貢献するための時間を取ってくれてありがとう!

以下に書かれているのは、GitHubにあるPoetryへ貢献するための指針です。
これらは指針であり、規約ではありません。
最良の判断を行い、このドキュメントの変更を遠慮無くプルリクエストで提案してください。

#### 目次

[貢献する方法](#how-to-contribute)

  * [バグ報告](#reporting-bugs)
  * [機能拡張の提案](#suggesting-enhancements)
  * [コードへの貢献](#contributing-to-code)


## 貢献する方法

### バグ報告

この節では、Poetryのバグ報告を送る案内をします。
ここに続く指針は、メンテナーやコミュニティが報告を理解し、振る舞いを再現し、関係する報告を見付ける助けになります。

バグ報告を作成する前に [このリスト](#before-submitting-a-bug-report)
を確認して、バグ報告を作成する必要があるか確認してください。
バグ報告を作成しているときは、できる限り多く細部について記述してください。
[必須項目テンプレート](https://github.com/sdispater/poetry/blob/master/.github/ISSUE_TEMPLATE/1_Bug_report.md)
を埋めてください。これが要求している情報があると、メンテナーがイシューを速く解決する助けになります。

!!!note

    出くわしたのと同じように見える **解決済み** のイシューを見付けた場合は、新しいイシューを作成し、その新しい問題報告の本文に元々のイシューへのリンク含めます。

#### バグ報告を提出する前に

* よくある質問や問題が列挙されている **[公式ウェブサイトのFAQ](https://poetry.eustace.io) を確認してください**
  。
* **[イシュートラッカー](https://github.com/sdispater/poetry/issues)
  に、既にイシューがないか確認してください** 。

#### バグ報告の提出方法

バグは [公式のイシュートラッカー](https://github.com/sdispater/poetry/issues) で管理されます。そこでは、
[テンプレート](https://github.com/sdispater/poetry/blob/master/.github/ISSUE_TEMPLATE/1_Bug_report.md)
を埋めて、新しいイシューを作って次の情報を提供できます。

問題について説明し、追加の詳細も説明に含めて、メンテナーが問題を再現するのを助けてください:

* イシューから問題を特定するために **明快な解説の見出しにしてください** 。
* できる限り多くの細部にわたって **問題を再現する正確な手順を記述してください** 。
* (プライベートパッケージレポジトリのような) プライベートである恐れのある情報を取り除いてから
  [Gist](https://gist.github.com) で **pyproject.tomlファイルを提供してください** 。
* **問題再現の手順を実演する具体例を提供してください** 。
  具体例で使うファイル、GitHubプロジェクト、コピー・ペーストできるコード片へのリンクも含めてください。
* **手順に従って実行した後に見られた振る舞いを記述して** 、厳密にはその振る舞いの何が問題なのか指摘してください。
* **そうではないどんな振る舞いを、なぜ期待するのか説明してください** 。
* **問題が予想外のエラーの送出だった場合は** 、 **debug** モード (`-vvv` オプション) で同じコマンドを実行してください。

次の質問に答えて、より多くの環境情報を提供してください:

* **問題は最近起こり始めましたか** (例えば、新しいバージョンのPoetryに更新した後)、それともいつも起こっていましたか？
* 問題が最近起こり始めた場合、 **古いバージョンのPoetryでも問題が再現しますか？**
  問題が起こらない最新のバージョンはいくつですか？
* **問題は確実に再現できますか？**
  そうでなければ、どのくらいの頻度で問題が起きるのか、どんな環境ならいつも起こるのか、についての詳細を提供してください。

設定や環境についての詳細を含めてください:

* **どのバージョンのPoetryを使っていますか？**
  ターミナルから `poetry -V` を実行すると、正確なバージョンが分かります。
* **どのPythonのバージョン向けのPoetryがインストールされていますか？**
  `debug:info` を実行して情報を取得してください。
* **使用しているOSの名前とバージョンは何ですか** ？


### 機能拡張の提案

この節では、今までに無い新規の機能や既存の機能の改善を含めた、Poetryへの機能拡張の提案の提示について案内します。
この指針に従うと、メンテナーとコミュニティにとって提案を理解し、関係する提案を見付ける助けになります。

機能拡張の提案を作成する必要が無いことが判明するかもしれないので、作成する前に
[このリスト](#before-submitting-an-enhancement-suggestion) を確認してください。
機能拡張の提案を作成するときは、
[できる限り多くの詳細も含めてください](#how-do-i-submit-an-enhancement-suggestion)。
[テンプレート](https://github.com/sdispater/poetry/blob/master/.github/ISSUE_TEMPLATE/2_Feature_request.md)
を埋めてください。もし要請している機能が実際に在るなら、思い描いている手順も含めてください。

#### 機能拡張の提案を提示する前に

* よくある質問や問題が列挙されている **[公式ウェブサイトのFAQ](https://poetry.eustace.io) を確認してください**
  。
* **[イシュートラッカー](https://github.com/sdispater/poetry/issues)
  に、既にイシューがないか確認してください** 。


#### どうやって機能拡張の提案を提示するのか？

機能拡張の提案は [公式のイシュートラッカー](https://github.com/sdispater/poetry/issues)
で管理されます。そこでは、新しいイシューを作って次の情報を提供できます:

* イシューから提案を特定するために **明快な解説の見出しにしてください** 。
* できる限り多くの細部にわたって **提案する機能拡張の順を追った説明を提供してください** 。
* **手順を実演する具体例を提供してください**..
* **現在の振る舞いを記述** し **そうではないどんな振る舞いを、なぜ期待しているのかを説明してください** 。


### コードへの貢献

#### 手元での開発

Poetryのコードベースへの貢献を始めるにはPoetryが必要です。
[ドキュメント](https://poetry.eustace.io/docs/#introduction)
を参照して、Poetryを使い始めてください。

`git` を使いレポジトリをクローンして、クローン先のディレクトリへ移動する必要があります:

```bash
$ git clone git@github.com:sdispater/poetry.git
$ cd poetry
```

さてここで、Poetryの必須の依存関係をインストールし、手元のマシンで現時点でのテストに通ることを確認する必要があります。

```bash
$ poetry install
$ poetry run pytest tests/
```

Poetryはコーディングの流儀に [black](https://github.com/ambv/black)
を使っていて、コードがそれに従っていることを確認しなければなりません。
そうでない場合、CIは失敗し、プルリクエストはマージされません。

コーディングの流儀に従っていないコードをうっかりコミットしてしまわないように、全てが様式に沿っていることを確認するpre-commitフックをインストールできます:

```bash
$ poetry run pre-commit install
```

コードは常に対応するテストが伴なっていなければならず、テストが存在しない場合は、コードはマージされません。

#### プルリクエスト

* [必須項目テンプレート](https://github.com/sdispater/poetry/blob/master/.github/PULL_REQUEST_TEMPLATE.md)
  を埋めてください。
* プルリクエストが、変更および追加があったコードを対象とするテストを含んでいることを確認してください。
* コードの変更によりドキュメントを変更する必要性がある場合、プルリクエストではドキュメントも変更しなければなりません。
